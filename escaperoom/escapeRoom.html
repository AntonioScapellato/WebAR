<html>
<head>
  <title>CaosVr | Escape Room</title>
   <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
   <script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>
   <meta name="apple-mobile-web-app-capable" content="yes">
</head>

 <body>
   <a-scene >

     <a-assets>
       <a-asset-item id="scrivaniaObj" src="scrivania.obj"></a-asset-item>
       <a-asset-item id="scrivaniaMtl" src="scrivania.mtl"></a-asset-item>
       <a-asset-item id="inventarioObj" src="inventario.obj"></a-asset-item>
       <a-asset-item id="inventarioMtl" src="inventario.mtl"></a-asset-item>
       <a-asset-item id="bedObj" src="tinker.obj"></a-asset-item>
       <a-asset-item id="bedMtl" src="letto.mtl"></a-asset-item>
       <a-asset-item id="cassettoObj" src="cassetto.obj"></a-asset-item>
       <a-asset-item id="cassettoMtl" src="cassetto.mtl"></a-asset-item>
       <a-asset-item id="switchLight" src="switch.obj"></a-asset-item>
       <a-asset-item id="doorObj" src="porta.obj"></a-asset-item>
       <a-asset-item id="doorMtl" src="porta.mtl"></a-asset-item>
       <a-asset-item id="armadioObj" src="armadio.obj"></a-asset-item>
       <a-asset-item id="armadioMtl" src="armadio.mtl"></a-asset-item>
       <a-asset-item id="roomObj" src="room.obj"></a-asset-item>
       <a-asset-item id="roomMtl" src="room.mtl"></a-asset-item>


       <a-img id="quadro" src="stellata.png"></a-img>

      </a-assets>

<!--CIELO-->
<a-sky color="black"> </a-sky>

<!--CAMERA + CURSORE-->
  <a-entity id="cameraRig" position="0 3 0">
    <a-camera look-controls wasd-controls position="0 0 0">
      <a-gui-cursor id="cursor"
            design="ring"
            cursor="fuse: true; fuseTimeout: 1000; maxDistance=: 100"
            position="0 0 -1"
            geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
            material="color: black; shader: flat"
            raycaster="objects: .clickable">
      </a-gui-cursor> <!-- /cursor -->
    </a-camera> <!-- /camera -->
  </a-entity>

  <!--SI DEVE SPEGNERE-->
  <a-entity id="luceOn">
          <!-- MODELLI -->
        <a-entity id="scrivania" obj-model="obj: #scrivaniaObj; mtl: #scrivaniaMtl;" scale="0.085 0.085 0.085;" position="-11.02 -1 1" rotation="0 90 0" ></a-entity>
        <a-obj-model src="#inventarioObj" mtl= "#inventarioMtl" scale="0.005 0.008 0.015;" position="-1.5 1 -1" rotation="0 90 0" ></a-obj-model>
        <a-obj-model src="#bedObj" mtl="#bedMtl" scale="0.04 0.04 0.04" position="-9 -3 -9" rotation="0 90 0" ></a-obj-model>
        <!--CASSETTI-->
        <a-plane color="#505050" position="0.645 1.1 3.3" scale="4.5 1 2" rotation="-90 0 0"></a-plane>

        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" class="clickable" scale="0.05 0.05 0.05" position="-1.2 0 3.8" rotation="-90 180 0" animation="startEvents: click; property: position; easing: linear; dur: 50; to: -1.2 0 2.5" animation__2="startEvents: click; property: position; easing: linear; dur: 50; to: -1.2 0 3.8; delay: 4000"></a-obj-model>
        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" class="clickable" scale="0.05 0.05 0.05" position="0 0 3.8" rotation="-90 180 0" animation="startEvents: click; property: position; easing: linear; dur: 50; to: 0 0 2.5" animation__2="startEvents: click; property: position; easing: linear; dur: 50; to: 0 0 3.8; delay: 4000" ></a-obj-model>
        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" class="clickable" scale="0.05 0.05 0.05" position="1.2 0 3.8" rotation="-90 180 0" animation="startEvents: click; property: position; easing: linear; dur: 50; to: 1.2 0 2.5" animation__2="startEvents: click; property: position; easing: linear; dur: 50; to: 1.2 0 3.8; delay: 4000"></a-obj-model>
        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" class="clickable" scale="0.05 0.05 0.05" position="2.4 0 3.8" rotation="-90 180 0" animation="startEvents: click; property: position; easing: linear; dur: 50; to: 2.4 0 2.5" animation__2="startEvents: click; property: position; easing: linear; dur: 50; to: 2.4 0 3.8; delay: 4000"></a-obj-model>
        

        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" class="clickable" scale="0.05 0.05 0.05" position="-1.2 -1 3.8" rotation="-90 180 0" animation="startEvents: click; property: position; easing: linear; dur: 50; to: -1.2 -1 2.5" animation__2="startEvents: click; property: position; easing: linear; dur: 50; to: -1.2 -1 3.8; delay: 4000"></a-obj-model>
        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" class="clickable" scale="0.05 0.05 0.05" position="0 -1 3.8" rotation="-90 180 0" animation="startEvents: click; property: position; easing: linear; dur: 50; to: 0 -1 2.5" animation__2="startEvents: click; property: position; easing: linear; dur: 50; to: 0 -1 3.8; delay: 4000" ></a-obj-model>
        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" class="clickable" scale="0.05 0.05 0.05" position="1.2 -1 3.8" rotation="-90 180 0" animation="startEvents: click; property: position; easing: linear; dur: 50; to: 1.2 -1 2.5" animation__2="startEvents: click; property: position; easing: linear; dur: 50; to: 1.2 -1 3.8; delay: 4000"></a-obj-model>
        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" class="clickable" scale="0.05 0.05 0.05" position="2.4 -1 3.8" rotation="-90 180 0" animation="startEvents: click; property: position; easing: linear; dur: 50; to: 2.4 -1 2.5" animation__2="startEvents: click; property: position; easing: linear; dur: 50; to: 2.4 -1 3.8; delay: 4000"></a-obj-model>
        

        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" class="clickable" scale="0.05 0.05 0.05" position="-1.2 -2 3.8" rotation="-90 180 0" animation="startEvents: click; property: position; easing: linear; dur: 50; to: -1.2 -2 2.5" animation__2="startEvents: click; property: position; easing: linear; dur: 50; to: -1.2 -2 3.8; delay: 4000"></a-obj-model>
        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" class="clickable" scale="0.05 0.05 0.05" position="0 -2 3.8" rotation="-90 180 0" animation="startEvents: click; property: position; easing: linear; dur: 50; to: 0 -2 2.5" animation__2="startEvents: click; property: position; easing: linear; dur: 50; to: 0 -2 3.8; delay: 4000" ></a-obj-model>
        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" class="clickable" scale="0.05 0.05 0.05" position="1.2 -2 3.8" rotation="-90 180 0" animation="startEvents: click; property: position; easing: linear; dur: 50; to: 1.2 -2 2.5" animation__2="startEvents: click; property: position; easing: linear; dur: 50; to: 1.2 -2 3.8; delay: 4000"></a-obj-model>
        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" class="clickable" scale="0.05 0.05 0.05" position="2.4 -2 3.8" rotation="-90 180 0" animation="startEvents: click; property: position; easing: linear; dur: 50; to: 2.4 -2 2.5" animation__2="startEvents: click; property: position; easing: linear; dur: 50; to: 2.4 -2 3.8; delay: 4000"></a-obj-model>
        
        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" class="clickable" scale="0.05 0.05 0.05" position="-1.2 -3 3.8" rotation="-90 180 0" animation="startEvents: click; property: position; easing: linear; dur: 50; to: -1.2 -3 2.5" animation__2="startEvents: click; property: position; easing: linear; dur: 50; to: -1.2 -3 3.8; delay: 4000"></a-obj-model>
        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" class="clickable" scale="0.05 0.05 0.05" position="0 -3 3.8" rotation="-90 180 0" animation="startEvents: click; property: position; easing: linear; dur: 50; to: 0 -3 2.5" animation__2="startEvents: click; property: position; easing: linear; dur: 50; to: 0 -3 3.8; delay: 4000" ></a-obj-model>
        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" class="clickable" scale="0.05 0.05 0.05" position="1.2 -3 3.8" rotation="-90 180 0" animation="startEvents: click; property: position; easing: linear; dur: 50; to: 1.2 -3 2.5" animation__2="startEvents: click; property: position; easing: linear; dur: 50; to: 1.2 -3 3.8; delay: 4000"></a-obj-model>
        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" class="clickable" scale="0.05 0.05 0.05" position="2.4 -3 3.8" rotation="-90 180 0" animation="startEvents: click; property: position; easing: linear; dur: 50; to: 2.4 -3 2.5" animation__2="startEvents: click; property: position; easing: linear; dur: 50; to: 2.4 -3 3.8; delay: 4000"></a-obj-model>
                <!---->

        <a-obj-model src="#switchLight" scale="0.7 0.7 0.7" position="8 2 -3" rotation="-90 0 90"></a-obj-model>
        <a-obj-model src="#doorObj" mtl="#doorMtl" scale="0.06 0.04 0.05" position="0 0 -16" rotation="0 0 0"></a-obj-model>
        <a-obj-model src="#armadioObj" mtl="#armadioMtl" scale="0.15 0.25 0.15" position="9 -2 -10" rotation="0 -90 0"></a-obj-model>
        <a-obj-model src="#roomObj" mtl="#roomMtl" scale="0.99 1.5 0.7" position="8 8 0" rotation="90 0 0"></a-obj-model>

     

<!--background-->
    <a-plane position="0 -5 0" height="1000" width="1000" rotation="-90 0 0" color="green" ></a-plane> 
     
        
        
        <!--IL VERO INTERRUTTORE -->
        <a-image  src="#quadro" scale="3 3 3" position="7 2 -3" rotation="0 90 0" animation="startEvents: click; property: position; to: 7 4.5 -3; dur: 2000" class="clickable"></a-image>
        <a-plane id="interruttore" scale="1 1 1" position="8 2 -3" color="black"   rotation="0 -90 0" class="clickable" visible="false"> </a-plane>

        <!--RESTART-->
      <a-gui-button id="start"
      position= "0 -2 0"
      width="2.5" height="0.75"
      rotation="-90 0 0"
      value="PLAY"
      font-family="Arial"
      margin="0 0 0.05 0"
      class="clickable" >
      </a-gui-button>


    <!-- plane enigma telefonico-->
    <a-plane id="tel_plane0" color="green" position="-1.37 3 -15" text="value: 0; align:center; color: black; width: 20; height: 20" class="clickable" scale="1.3 1.3 1.3" ></a-plane>
    <a-plane id="tel_plane1" color="green" position="0 3 -15" text="value: 0; align:center; color: black; width: 20; height: 20" class="clickable" scale="1.3 1.3 1.3"></a-plane>
    <a-plane id="tel_plane2" color="green" position="1.37 3 -15" text="value: 0; align:center; color: black; width: 20; height: 20" class="clickable" scale="1.3 1.3 1.3"></a-plane>
    <a-plane id="tel_planeOk" color="green" position="0.007 1.5 -15" text="value: CONFERMA; align:center; color: black; width: 4.35; height: 7" class="clickable" scale="4 1.3 1.3"></a-plane>


<!--PLANE COMPUTER-->
<a-box color="purple" position="-9.7 -3.8 0.7" scale="4 4 4"></a-box>

<a-plane id="pc_plane0" color="green" position="-7.65 -4.5 -0.2" rotation="0 90 0"  text="value: 0; align:center; color: black; width: 20; height: 20" class="clickable" scale="0.8 0.8 0.8" ></a-plane>
    <a-plane id="pc_plane1" color="green" position="-7.65 -4.5 0.8" rotation="0 90 0" text="value: 0; align:center; color: black; width: 20; height: 20" class="clickable" scale="0.8 0.8 0.8"></a-plane>
    <a-plane id="pc_plane2" color="green" position="-7.65 -4.5 1.8" rotation="0 90 0" text="value: 0; align:center; color: black; width: 20; height: 20" class="clickable" scale="0.8 0.8 0.8"></a-plane>
    <a-plane id="pc_planeOk" color="green" position="-7.65 -2.3 2.15" rotation="0 90 0" text="value: OFF; align:center; color: black; width: 12; height: 12" class="clickable" scale="1 1 1"></a-plane>

    <!--PLANE MELE-->

    <a-plane color="black" position="5.955 -2.8 -11.3" rotation="0 -90 0" scale="3.6 4.8 5"></a-plane>
    <a-plane id="porta_scorrevole" color="yellow" position="5.955 -2.8 -7.6" rotation="0 -90 0" scale="3.6 4.8 5"></a-plane>


<a-plane id="mele_plane0" color="green" position="5.9 -1 -10" rotation="0 -90 0"  text="value: 0; align:center; color: black; width: 20; height: 20" class="clickable" scale="0.8 0.8 0.8" ></a-plane>
    <a-plane id="mele_plane1" color="green" position="5.9 -2 -10" rotation="0 -90 0" text="value: 0; align:center; color: black; width: 20; height: 20" class="clickable" scale="0.8 0.8 0.8"></a-plane>
    <a-plane id="mele_plane2" color="green" position="5.9 -3 -10" rotation="0 -90 0" text="value: 0; align:center; color: black; width: 20; height: 20" class="clickable" scale="0.8 0.8 0.8"></a-plane>
    <a-plane id="mele_planeOk" color="green" position="5.9 -4 -10" rotation="0 -90 0" text="value: OFF; align:center; color: black; width: 12; height: 12" class="clickable" scale="0.8 0.8 0.8"></a-plane>


</a-entity>
   </a-scene>

<script>
  var sceneEl = document.querySelector('a-scene');
  var risp0=2;
  var risp1=2;
  var risp2=2;



  var luceOn=document.querySelector('#luceOn');
  var cursore= document.querySelector('a-gui-cursor');
  var inter=document.querySelector('#interruttore');
  var i=0;
  var k=0;
  

//TEL_PLANE
var vet= new Array();
  vet[0]=0;
  vet[1]=0;
  vet[2]=0;


  var tel_plane0= document.querySelector('#tel_plane0');
  var tel_plane1= document.querySelector('#tel_plane1');
  var tel_plane2= document.querySelector('#tel_plane2');
  var tel_planeOk= document.querySelector('#tel_planeOk');

  


//scorrimento cifre

//PRIMO PLANE
tel_plane0.addEventListener('click', function(evt){
  //incrementa il numero, se è 9 torna a 0
  if(vet[0]==9)
  {
    vet[0]=0;
  }
  else{
    vet[0]++;
  }

  tel_plane0.setAttribute('text', 'value: ' + vet[0]);
});

//SECONDO PLANE
tel_plane1.addEventListener('click', function(evt){
  //incrementa il numero, se è 9 torna a 0
  if(vet[1]==9)
  {
    vet[1]=0;
  }
  else{
    vet[1]++;
  }

  tel_plane1.setAttribute('text', 'value: ' + vet[1]);

});
//TERZO PLANE
tel_plane2.addEventListener('click', function(evt){
  //incrementa il numero, se è 9 torna a 0
  if(vet[2]==9)
  {
    vet[2]=0;
  }
  else{
    vet[2]++;
  }
  tel_plane2.setAttribute('text', 'value: ' + vet[2]);

});
//VITTORIA
tel_planeOk.addEventListener('click', function(evt){
  if(vet[0]==risp0 && vet[1]== risp1 && vet[2]== risp2)
  {
    console.log('bravoooooooo');
  }
});

//PC_PLANE
var pc= new Array();
  pc[0]=0;
  pc[1]=0;
  pc[2]=0;
var pc_plane0= document.querySelector('#pc_plane0');
  var pc_plane1= document.querySelector('#pc_plane1');
  var pc_plane2= document.querySelector('#pc_plane2');
  var pc_planeOk= document.querySelector('#pc_planeOk');

  
//scorrimento cifre

//PRIMO PLANE
pc_plane0.addEventListener('click', function(evt){
  //incrementa il numero, se è 9 torna a 0
  if(pc[0]==9)
  {
    pc[0]=0;
  }
  else{
    pc[0]++;
  }

  pc_plane0.setAttribute('text', 'value: ' + pc[0]);
});

//SECONDO PLANE
pc_plane1.addEventListener('click', function(evt){
  //incrementa il numero, se è 9 torna a 0
  if(pc[1]==9)
  {
    pc[1]=0;
  }
  else{
    pc[1]++;
  }

  pc_plane1.setAttribute('text', 'value: ' + pc[1]);

});
//TERZO PLANE
pc_plane2.addEventListener('click', function(evt){
  //incrementa il numero, se è 9 torna a 0
  if(pc[2]==9)
  {
    pc[2]=0;
  }
  else{
    pc[2]++;
  }
  pc_plane2.setAttribute('text', 'value: ' + pc[2]);

});
//VITTORIA
pc_planeOk.addEventListener('click', function(evt){
  if(pc[0]==risp0 && pc[1]== risp1 && pc[2]== risp2)
  {
    console.log('bravoooooooo');
  }
});


//mele_PLANE
var mele= new Array();
  mele[0]=0;
  mele[1]=0;
  mele[2]=0;


  var mele_plane0= document.querySelector('#mele_plane0');
  var mele_plane1= document.querySelector('#mele_plane1');
  var mele_plane2= document.querySelector('#mele_plane2');
  var mele_planeOk= document.querySelector('#mele_planeOk');

  


//scorrimento cifre

//PRIMO PLANE
mele_plane0.addEventListener('click', function(evt){
  //incrementa il numero, se è 9 torna a 0
  if(mele[0]==9)
  {
    mele[0]=0;
  }
  else{
    mele[0]++;
  }

  mele_plane0.setAttribute('text', 'value: ' + mele[0]);
});

//SECONDO PLANE
mele_plane1.addEventListener('click', function(evt){
  //incrementa il numero, se è 9 torna a 0
  if(mele[1]==9)
  {
    mele[1]=0;
  }
  else{
    mele[1]++;
  }

  mele_plane1.setAttribute('text', 'value: ' + mele[1]);

});
//TERZO PLANE
mele_plane2.addEventListener('click', function(evt){
  //incrementa il numero, se è 9 torna a 0
  if(mele[2]==9)
  {
    mele[2]=0;
  }
  else{
    mele[2]++;
  }
  mele_plane2.setAttribute('text', 'value: ' + mele[2]);

});
//VITTORIA
mele_planeOk.addEventListener('click', function(evt){
  if(mele[0]==risp0 && mele[1]== risp1 && mele[2]== risp2)
  {
    console.log('bravoooooooo');
  }
});




//LUCE
var delayInMilliseconds = 3000;


inter.addEventListener('click', function(evt){
 luceOn.setAttribute('visible', 'false');
 cursore.setAttribute('raycaster', 'enabled: false');

 setTimeout(function() {
   //your code to be executed after 1 second
   luceOn.setAttribute('visible', 'true');
   cursore.setAttribute('raycaster', 'enabled: true');
 }, delayInMilliseconds);
//end TIMER
});
//END LUCE








</script>
   </body>
  </html>

<html>
<head>
  <title>CaosVr | Escape Room</title>
   <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
   <script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>
   <meta name="apple-mobile-web-app-capable" content="yes">
</head>

 <body>
   <a-scene >

     <a-assets>
       <a-asset-item id="scrivaniaObj" src="scrivania.obj"></a-asset-item>
       <a-asset-item id="scrivaniaMtl" src="scrivania.mtl"></a-asset-item>
       <a-asset-item id="inventarioObj" src="inventario.obj"></a-asset-item>
       <a-asset-item id="inventarioMtl" src="inventario.mtl"></a-asset-item>
       <a-asset-item id="bedObj" src="tinker.obj"></a-asset-item>
       <a-asset-item id="bedMtl" src="letto.mtl"></a-asset-item>
       <a-asset-item id="cassettoObj" src="cassetto.obj"></a-asset-item>
       <a-asset-item id="cassettoMtl" src="cassetto.mtl"></a-asset-item>
       <a-asset-item id="switchLight" src="switch.obj"></a-asset-item>
       <a-asset-item id="doorObj" src="porta.obj"></a-asset-item>
       <a-asset-item id="doorMtl" src="porta.mtl"></a-asset-item>

      </a-assets>


<a-sky color="black"> </a-sky>

  <a-entity id="cameraRig" position="0 3 0">
    <a-camera look-controls wasd-controls position="0 0 0">
      <a-gui-cursor id="cursor"
            design="ring"
            cursor="fuse: true; fuseTimeout: 1000; maxDistance=: 100"
            position="0 0 -1"
            geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
            material="color: black; shader: flat"
            raycaster="objects: .clickable">
      </a-gui-cursor> <!-- /cursor -->
    </a-camera> <!-- /camera -->
  </a-entity>

  <a-entity id="luceOn">
          <!-- MODELLI -->
        <a-entity id="scrivania" obj-model="obj: #scrivaniaObj; mtl: #scrivaniaMtl;" scale="0.085 0.085 0.085;" position="-8 0 1" rotation="0 90 0" ></a-entity>
        <a-obj-model src="#inventarioObj" mtl= "#inventarioMtl" scale="0.005 0.008 0.015;" position="-1.5 1 -0.6" rotation="0 90 0" ></a-obj-model>
        <a-obj-model src="#bedObj" mtl="#bedMtl" scale="0.04 0.04 0.04" position="-9 -2 -9" rotation="0 90 0" ></a-obj-model>
        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" scale="0.05 0.05 0.05" position="0 -2 3" rotation="-90 180 0" ></a-obj-model>
        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" scale="0.05 0.05 0.05" position="1.2 -2 3" rotation="-90 180 0" ></a-obj-model>
        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" scale="0.05 0.05 0.05" position="-1.2 -2 3" rotation="-90 180 0" ></a-obj-model>
        <a-obj-model src="#cassettoObj" mtl="#cassettoMtl" class="clickable" scale="0.05 0.05 0.05" position="2.4 -2 3" rotation="-90 180 0" animation="startEvents: click; property: position; easing: linear; dur: 50; to: 2.4 -2 2" animation__2="startEvents: click; property: position; easing: linear; dur: 50; to: 2.4 -2 3; delay: 700"></a-obj-model>
        <a-obj-model src="#switchLight" scale="1 1 1" position="6 4 -6" rotation="-90 0 90"></a-obj-model>
        <a-obj-model src="#doorObj" mtl="#doorMtl" scale="0.06 0.04 0.05" position="0 0 -16" rotation="0 0 0"></a-obj-model>
        

     

<!--background-->
    <a-plane position="0 -5 0" height="1000" width="1000" rotation="-90 0 0" color="green" ></a-plane> 
        <a-plane color="red" position="-12 0 0" scale="500 50 50" rotation="0 90 0"></a-plane>
        <a-plane color="red" position="0 0 -17" scale="500 50 50" rotation="0 0 0"></a-plane>
        <a-plane color="red" position="12 0 0" scale="500 50 50" rotation="0 -90 0"></a-plane>
        <a-plane color="red" position="0 0 17" scale="500 50 50" rotation="0 180 0"></a-plane>
      <a-plane color="red" position="0 12 0" scale="500 50 50" rotation="90 0 0"></a-plane>

        <!--IL VERO INTERRUTTORE -->
        <a-plane id="interruttore" scale="1 1 1" position="6 4 -6" color="black" class="clickable"> </a-plane>

      <a-gui-button id="start"
      position= "0 -2 0"
      width="2.5" height="0.75"
      rotation="-90 0 0"
      value="PLAY"
      font-family="Arial"
      margin="0 0 0.05 0"
      class="clickable" >
      </a-gui-button>


    <!-- plane enigma telefonico-->
    <a-plane id="plane0" color="green" position="-1.37 3 -15" text="value: 0; align:center; color: black; width: 20; height: 20" class="clickable" scale="1.3 1.3 1.3" ></a-plane>
    <a-plane id="plane1" color="green" position="0 3 -15" text="value: 0; align:center; color: black; width: 20; height: 20" class="clickable" scale="1.3 1.3 1.3"></a-plane>
    <a-plane id="plane2" color="green" position="1.37 3 -15" text="value: 0; align:center; color: black; width: 20; height: 20" class="clickable" scale="1.3 1.3 1.3"></a-plane>
    <a-plane id="planeOk" color="green" position="0.007 1.5 -15" text="value: CONFERMA; align:center; color: black; width: 4.35; height: 7" class="clickable" scale="4 1.3 1.3"></a-plane>


</a-entity>

   </a-scene>

<script>
  var sceneEl = document.querySelector('a-scene');
  var risp0=2;
  var risp1=2;
  var risp2=2;



  var luceOn=document.querySelector('#luceOn');
  var cursore= document.querySelector('a-gui-cursor');
  var inter=document.querySelector('#interruttore');
  var i=0;
  var vet= new Array();
  vet[0]=0;
  vet[1]=0;
  vet[2]=0;

  var plane0= document.querySelector('#plane0');
  var plane1= document.querySelector('#plane1');
  var plane2= document.querySelector('#plane2');
  var planeOk= document.querySelector('#planeOk');

var delayInMilliseconds = 3000;

//scorrimento cifre

//PRIMO PLANE
plane0.addEventListener('click', function(evt){
  //incrementa il numero, se è 9 torna a 0
  if(vet[0]==9)
  {
    vet[0]=0;
  }
  else{
    vet[0]++;
  }

  plane0.setAttribute('text', 'value: ' + vet[0]);
});

//SECONDO PLANE
plane1.addEventListener('click', function(evt){
  //incrementa il numero, se è 9 torna a 0
  if(vet[1]==9)
  {
    vet[1]=0;
  }
  else{
    vet[1]++;
  }

  plane1.setAttribute('text', 'value: ' + vet[1]);

});
//TERZO PLANE
plane2.addEventListener('click', function(evt){
  //incrementa il numero, se è 9 torna a 0
  if(vet[2]==9)
  {
    vet[2]=0;
  }
  else{
    vet[2]++;
  }
  plane2.setAttribute('text', 'value: ' + vet[2]);

});

planeOk.addEventListener('click', function(evt){
  if(vet[0]==risp0 && vet[1]== risp1 && vet[2]== risp2)
  {
    console.log('bravoooooooo');
  }
});

//LUCE
inter.addEventListener('click', function(evt){
 luceOn.setAttribute('visible', 'false');
 cursore.setAttribute('raycaster', 'enabled: false');

 setTimeout(function() {
   //your code to be executed after 1 second
   luceOn.setAttribute('visible', 'true');
   cursore.setAttribute('raycaster', 'enabled: true');
 }, delayInMilliseconds);
//end TIMER
});
//END LUCE








</script>
   </body>
  </html>
